<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="album.css">
    <title>Soundsnap</title>
</head>
<body onload="album_main()">
    <header>
        <a href="/" class="logo">
            <img src="logo_soundsnap_claro.png" alt="" class="logo">
        </a>
        <form action="" method="get" id="pesquisa">
            <input type="text" name="search" id="pesq" placeholder="O quê você quer ouvir hoje?"> 
            <button type="submit">
                <img src="play_bege_soundsnap.png" alt="">
            </button>
        </form>
        <a href="cadastro.html" class="form">
            <img src="user.png" alt="">
        </a>
    </header>
    <main>
        <div class="container">
            <div id="artista"></div>
        </div>
    </main>
    <script src="acess.js"></script>
    <script>
        
async function album(token, id) {
    const result = fetch("https://api.spotify.com/v1/albums/" + id, {
        headers: {'Authorization': "Bearer " + token.access_token}
    }).then(data => {
        return data.json()
    }).then(response =>{
        return response
    })
    let response = await result
    artista(token, response.artists[0].id, response) 
    console.log(response)
    return response
}



async function artista(token, id, album) {
    const result = fetch("https://api.spotify.com/v1/artists/" + id, {
        headers: {'Authorization': "Bearer " + token.access_token}
    }).then(data => {
        return data.json()
    }).then(response =>{
        return response
    })
    let response = await result
    console.log(response)
    await displayer(response, album)
    return response
}

async function displayer(artista, album) {
    let a = document.getElementById("artista")

    a.innerHTML += 
    `
        <img src="" alt="">
        <div class="infos">
            <h1>${artista.name}</h1>
            <p>${artista.followers.total} Seguidores</p>
            <p>Principais generos: </p>
            <p>Nota de popularidade: ${artista.popularity}</p>
        </div>
    `
}

    </script>
</body>
</html>